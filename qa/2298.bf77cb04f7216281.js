"use strict";(self.webpackChunkeventat_app=self.webpackChunkeventat_app||[]).push([[2298],{2298:(S,v,s)=>{s.r(v),s.d(v,{TabBarPageModule:()=>N});var g=s(6814),u=s(6223),i=s(1903),p=s(2787),_=s(5861),x=s(2572),y=s(2267),f=s(4611),t=s(9212),d=s(9515),m=s(6632),b=s(3023),w=s(9216),B=s(296),P=s(352);const A=["events"];function J(n,T){if(1&n){const o=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.search())}),t._UZ(1,"i",19),t.qZA()}}function U(n,T){if(1&n){const o=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.clearSearch())}),t._UZ(1,"i",20),t.qZA()}}function C(n,T){if(1&n&&(t.TgZ(0,"div",21),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"trans"),t._UZ(4,"hr",22),t.qZA()),2&n){const o=t.oxw();t.xp6(),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,o.category.name))," ")}}let Z=(()=>{class n{constructor(o,e,a,c,l,r,h,Q,I){this.translate=o,this.route=e,this.dialog=a,this.categoryService=c,this.modalController=l,this.title=r,this.router=h,this._location=Q,this.trans=I,setTimeout(()=>{this.title.setTitle(this.translate.instant("sidenav.browse"))},100)}ngOnInit(){(0,x.a)([this.route.queryParamMap,this.route.paramMap]).subscribe(([o,e])=>{const a={...o.params,...e.params};(!this.events?.events||0===this.events?.events?.length||this.events?.params.q!==a.q)&&(this.category_slug=a.category,this.price=a.price,this.location=a.location,this.q=a.q,this.fetch())})}fetch(){this.category_slug&&this.fetchCategory(),this.params={q:this.q,category:this.category_slug,price_le:this.price,location:this.location,page_size:20}}fetchCategory(){this.categoryService.get(this.category_slug).subscribe(o=>{this.category=o,this.title.setTitle(this.trans.transform(this.category.name))},o=>{console.log(o)})}showFilters(){var o=this;return(0,_.Z)(function*(){const e=yield o.modalController.create({component:y.m9,componentProps:{category:o.category},backdropDismiss:!0,breakpoints:[0,1],initialBreakpoint:1,canDismiss:!0,handle:!1,cssClass:"auto-height-all modal-max-width-95"});e.present(),yield e.onWillDismiss().then(a=>{o.goToCategory(a.data)})})()}goToCategory(o){this.category=o,this.category_slug=o?.slug,this.fetch(),this.router.navigate(["/browse/"],this.category_slug?{queryParams:{category:this.category_slug},queryParamsHandling:"merge",replaceUrl:!0}:{queryParamsHandling:"merge",replaceUrl:!0})}search(){window.gtag&&gtag("event","search",{search_term:this.q}),this._location.go("/browse/?q="+this.q),this.fetch()}clearSearch(){this.q="",this._location.go("/browse/"),this.search()}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(d.sK),t.Y36(p.gz),t.Y36(f.vc),t.Y36(m.HE),t.Y36(i.IN),t.Y36(m.yD),t.Y36(p.F0),t.Y36(g.Ye),t.Y36(f.Rs))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-browse"]],viewQuery:function(e,a){if(1&e&&t.Gf(A,5),2&e){let c;t.iGM(c=t.CRH())&&(a.events=c.first)}},inputs:{price:"price",location:"location",category:"category",category_slug:"category_slug",q:"q",url:"url",params:"params"},features:[t._Bn([f.Rs])],decls:23,vars:11,consts:[[3,"showBackButton"],[1,"flex","flex-col","w-full","h-full"],[1,"navbar","shrink-0","w-full","px-5","elevation-5","bg-app-background"],[1,"search-input","w-full","container"],["type","search",1,"grow","truncate","text-ellipsis","w-full",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["class","btn",3,"click",4,"ngIf"],[1,"flex","h-full","container"],[1,"hidden","md:block","max-w-xs","shrink-0",2,"min-width","220px"],[3,"category","selected"],[1,"grow"],["slot","fixed",3,"ionRefresh"],["class","text-lg font-bold px-5 pt-5 text-gray-700",4,"ngIf"],[1,"p-5"],[3,"url","params"],["events",""],["vertical","bottom","horizontal","end","slot","fixed",1,"block","md:hidden"],[3,"click"],[1,"mdi","mdi-filter-variant","mdi-24px"],[1,"btn",3,"click"],[1,"mdi","mdi-magnify","mdi-18px"],[1,"mdi","mdi-close","mdi-18px"],[1,"text-lg","font-bold","px-5","pt-5","text-gray-700"],[1,"mb-0"]],template:function(e,a){if(1&e){const c=t.EpF();t._UZ(0,"eventat-navbar",0),t.TgZ(1,"ion-content")(2,"div",1)(3,"div",2)(4,"div",3)(5,"input",4),t.NdJ("ngModelChange",function(r){return a.q=r})("keydown.enter",function(){return a.search()}),t.ALo(6,"translate"),t.qZA(),t.YNc(7,J,2,0,"button",5)(8,U,2,0,"button",5),t.qZA()(),t.TgZ(9,"div",6)(10,"div",7)(11,"eventat-events-filter",8),t.NdJ("selected",function(r){return a.goToCategory(r)}),t.qZA()(),t.TgZ(12,"div",9)(13,"ion-content")(14,"ion-refresher",10),t.NdJ("ionRefresh",function(r){t.CHM(c);const h=t.MAs(19);return t.KtG(h.fetch(!0,r))}),t._UZ(15,"ion-refresher-content"),t.qZA(),t.YNc(16,C,5,5,"div",11),t.TgZ(17,"div",12),t._UZ(18,"eventat-events",13,14),t.qZA()()()(),t.TgZ(20,"ion-fab",15)(21,"ion-fab-button",16),t.NdJ("click",function(){return a.showFilters()}),t._UZ(22,"i",17),t.qZA()()()()}2&e&&(t.Q6J("showBackButton",!1),t.xp6(5),t.Q6J("ngModel",a.q)("placeholder",t.lcZ(6,9,"Search for events you love")),t.xp6(2),t.Q6J("ngIf",!a.q),t.xp6(),t.Q6J("ngIf",a.q),t.xp6(3),t.Q6J("category",a.category),t.xp6(5),t.Q6J("ngIf",a.category),t.xp6(2),t.Q6J("url",a.url)("params",a.params))},dependencies:[g.O5,u.Fj,u.JJ,u.On,i.W2,i.IJ,i.W4,i.nJ,i.Wo,b.S,w.H,B.D,g.rS,d.X$,P.R]})}return n})();var q=s(5973);let M=(()=>{class n{constructor(o,e){this.title=o,this.app$=e,this.title.setTitle()}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(m.yD),t.Y36(y.zi))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:1,consts:[[3,"showBackButton"],["slot","fixed",3,"ionRefresh"],["frontpage",""]],template:function(e,a){if(1&e){const c=t.EpF();t._UZ(0,"eventat-navbar",0),t.TgZ(1,"ion-content")(2,"ion-refresher",1),t.NdJ("ionRefresh",function(r){t.CHM(c);const h=t.MAs(5);return t.KtG(h.fetch(r))}),t._UZ(3,"ion-refresher-content"),t.qZA(),t._UZ(4,"eventat-frontpage",null,2),t.qZA()}2&e&&t.Q6J("showBackButton",!1)},dependencies:[i.W2,i.nJ,i.Wo,q.t,b.S]})}return n})();var R=s(8899);const Y=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-tab-bar"]],decls:17,vars:9,consts:[["slot","bottom"],["tab","home"],["name","home",1,"mdi-24px"],["tab","browse"],["name","search",1,"mdi-24px"],["tab","tickets"],["name","ticket-outline",1,"mdi-24px"]],template:function(e,a){1&e&&(t.TgZ(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),t._UZ(3,"ion-icon",2),t.TgZ(4,"ion-label"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"ion-tab-button",3),t._UZ(8,"ion-icon",4),t.TgZ(9,"ion-label"),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"ion-tab-button",5),t._UZ(13,"ion-icon",6),t.TgZ(14,"ion-label"),t._uU(15),t.ALo(16,"translate"),t.qZA()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,3,"sidenav.home")),t.xp6(5),t.Oqu(t.lcZ(11,5,"sidenav.search")),t.xp6(5),t.Oqu(t.lcZ(16,7,"sidenav.tickets")))},dependencies:[i.gu,i.Q$,i.yq,i.ZU,i.UN,d.X$]})}return n})(),children:[{path:"home",component:M},{path:"browse",component:Z},{path:"tickets",component:R.W},{path:"browse/:category",component:Z}]}];let k=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(Y),p.Bz]})}return n})();var F=s(3255),H=s(1309);let N=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[g.ez,u.u5,i.Pc,k,F.mR9.forRoot(),m.TA.forRoot(H.N)]})}return n})()}}]);